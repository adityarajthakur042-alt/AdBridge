<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AdBridge — Your One-Stop Ad Hub</title>
  <meta name="description" content="AdBridge — banners, pamphlets, hoardings and more. Connect with local vendors or request quotes via AdBridge." />
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --accent:#0b6df0;
      --muted:#6b7280;
      --radius:12px;
      --maxw:1100px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:linear-gradient(180deg,#f8fbff 0%,var(--bg) 100%);color:#0f172a;padding:20px;display:flex;justify-content:center}
    .site{width:100%;max-width:var(--maxw)}
    header{display:flex;align-items:center;gap:16px;margin-bottom:14px}
    .logo{width:58px;height:58px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#6bb3ff);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:20px;box-shadow:0 8px 30px rgba(11,109,240,0.12)}
    h1{margin:0;font-size:20px}
    .tag{color:var(--muted);font-size:13px;margin-top:4px}
    nav{display:flex;gap:10px;margin-top:6px;flex-wrap:wrap}
    .btn{background:var(--card);border-radius:10px;padding:8px 12px;display:inline-block;box-shadow:0 4px 14px rgba(14,20,25,0.04);font-weight:600;cursor:pointer;text-decoration:none;color:var(--accent);border:1px solid rgba(11,109,240,0.08)}
    .primary{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer;box-shadow:0 12px 30px rgba(11,109,240,0.12)}
    .secondary{background:transparent;border:1px solid rgba(11,109,240,0.12);padding:10px 14px;border-radius:10px;color:var(--accent)}
    .hero{background:linear-gradient(180deg,#ffffff,#fbfdff);border-radius:var(--radius);padding:18px;display:flex;gap:18px;align-items:center;box-shadow:0 10px 30px rgba(12,20,40,0.04)}
    .hero-left{flex:1}
    .hero-title{font-size:20px;margin:0 0 8px 0}
    .hero-sub{color:var(--muted);margin:0 0 12px 0}
    main{margin-top:18px;display:grid;grid-template-columns:1fr 360px;gap:18px}
    @media (max-width:900px){main{grid-template-columns:1fr} .preview-art{display:none}}
    .cards{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    @media (max-width:600px){.cards{grid-template-columns:1fr}}
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(12,20,40,0.04);border:1px solid rgba(15,23,42,0.04);display:flex;gap:12px;align-items:center}
    .card-thumb{width:88px;height:64px;border-radius:8px;background:linear-gradient(135deg,#fff,#f0f8ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--accent)}
    .small{font-size:12px;color:var(--muted)}
    .sidebar{position:relative;background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 20px rgba(12,20,40,0.04);border:1px solid rgba(15,23,42,0.04)}
    input, textarea, select{padding:8px 10px;border-radius:8px;border:1px solid #e6eefb;background:#fbfdff;font-size:14px;outline:none;width:100%}
    textarea{min-height:90px;resize:vertical}
    .upload-preview{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .up-img{width:86px;height:60px;border-radius:8px;object-fit:cover;border:1px solid rgba(12,20,40,0.04)}
    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
    /* vendor boxes */
    .vendor-box{margin-top:12px;border-radius:10px;padding:10px;background:#fbfdff;border:1px solid #eef4ff}
    .vendor-item{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid rgba(12,20,40,0.04);margin-bottom:8px;background:white}
    .vendor-thumb{width:48px;height:48px;border-radius:8px;background:linear-gradient(135deg,#e9f1ff,#fff);display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--accent)}
    .vendor-meta{flex:1;text-align:left}
    .vendor-meta h4{margin:0;font-size:13px}
    .vendor-meta p{margin:4px 0 0 0;font-size:12px;color:var(--muted)}
    /* main vendor grid */
    .vendor-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px;margin-top:12px}
    .vendor-card-main{background:var(--card);padding:12px;border-radius:10px;border:1px solid rgba(15,23,42,0.04);box-shadow:0 6px 18px rgba(12,20,40,0.04);text-align:center}
    .vendor-card-main img{width:100%;height:140px;object-fit:cover;border-radius:8px;margin-bottom:8px}
    .btn-request{background:var(--accent);color:white;padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
  </style>
</head>
<body>
  <div class="site">
    <header>
      <div class="logo">AB</div>
      <div style="flex:1">
        <h1>AdBridge — Your One-Stop Ad Hub</h1>
        <div class="tag">Banners • Pamphlets • Hoardings — Request quotes securely via AdBridge</div>
        <nav style="margin-top:8px">
          <a class="btn" href="#categories" onclick="scrollIntoSection('categories')">Categories</a>
          <a class="btn" href="#upload" onclick="scrollIntoSection('upload')">Upload Sample</a>
          <a class="btn" href="#vendors" onclick="scrollIntoSection('vendors')">Vendors</a>
          <a class="btn" href="#contact" onclick="scrollIntoSection('contact')">Contact</a>
        </nav>
      </div>
    </header>

    <section class="hero" aria-label="hero">
      <div class="hero-left">
        <div>
          <div class="hero-title">Get the perfect ad for your business — fast</div>
          <div class="hero-sub">Browse vetted vendors and request quotes — we deliver leads to vendors so you stay in control.</div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="primary" onclick="scrollIntoSection('vendors')">Browse Vendors</button>
            <a class="secondary btn" href="https://docs.google.com/forms/d/e/1FAIpQLSciSOctKklCJePrdVLMfI_E9w3eXtu2HKP2MfxskXTNeHlcsQ/viewform?usp=header" target="_blank">Upload Sample</a>
          </div>
        </div>
      </div>
      <div class="preview-art" aria-hidden="true" style="width:180px;height:120px;border-radius:10px;background:linear-gradient(135deg,#e9f1ff,#fff);display:flex;align-items:center;justify-content:center;color:var(--accent);font-weight:700">AD SAMPLES</div>
    </section>

    <main>
      <section>
        <h2 id="categories" style="margin:0 0 10px 0">Popular Categories</h2>
        <div class="cards" role="list">
          <article class="card" role="listitem"><div class="card-thumb">B</div><div><h3>Banners</h3><p class="small">Outdoor banners, vinyl prints, flex boards.</p></div></article>
          <article class="card" role="listitem"><div class="card-thumb">F</div><div><h3>Pamphlets</h3><p class="small">Flyers, leaflets, bulk print.</p></div></article>
          <article class="card" role="listitem"><div class="card-thumb">H</div><div><h3>Hoardings</h3><p class="small">Large-format hoardings & placement.</p></div></article>
          <article class="card" role="listitem"><div class="card-thumb">D</div><div><h3>Digital Ads</h3><p class="small">Social & web creatives.</p></div></article>
        </div>

        <div style="margin-top:16px">
          <h3 style="margin-bottom:8px">How it works</h3>
          <ol class="small" style="padding-left:18px;margin:0">
            <li>Browse vendor cards (samples & service only).</li>
            <li>Click <strong>Request Quote</strong> — fill quick form.</li>
            <li>AdBridge sends lead to vendor (you handle follow-up & commission).</li>
          </ol>
        </div>

        <!-- LIVE VENDOR LISTINGS -->
        <section id="vendors" style="margin-top:18px">
          <h2 style="margin-bottom:8px">Live Vendor Listings</h2>
          <div id="vendorGrid" class="vendor-grid">
            <div class="card">Loading vendors...</div>
          </div>
        </section>
      </section>

      <aside class="sidebar">
        <h3 style="margin-top:0">Quick Request</h3>
        <p class="small">Prefer to send a request quickly? Click below to open the customer request form.</p>
        <a class="btn" href="https://docs.google.com/forms/d/e/1FAIpQLScALmXEMI63j7hFbhDPolxKLxiO_PyQNpWazUruS2DcZbc8jg/viewform?usp=publish-editor" target="_blank">Quick Request Form</a>

        <hr style="margin:12px 0;border:none;border-top:1px solid #eef4ff">

        <h4 style="margin:8px 0 6px 0">Upload a sample (local preview)</h4>
        <p class="small">Showcase your design files (local preview only).</p>
        <div id="upload" style="margin-top:8px">
          <input id="fileInput" type="file" accept="image/*" multiple onchange="previewFiles()" />
          <div class="upload-preview" id="previewArea"></div>
        </div>

        <div class="vendor-box" style="margin-top:12px">
          <strong style="display:block;margin-bottom:8px">Vendor Quick View</strong>
          <div id="vendorListSidebar">
            <div class="vendor-empty">Loading vendors...</div>
          </div>
        </div>
      </aside>
    </main>

    <footer id="contact">
      <section style="margin-top:14px">
        <div style="max-width:720px;margin:0 auto;text-align:center">
          <h3 style="margin-bottom:8px">Contact & Support</h3>
          <p class="muted small" style="margin:0 0 8px 0">Email: <strong>adityarajthakur042@gmail.com</strong></p>
        </div>
      </section>
      <div style="margin-top:12px">© <span id="year"></span> AdBridge — Built with ❤️</div>
    </footer>
  </div>

  <!-- Popup quote form (customer submits here; we forward lead via mailto to admin and optionally open Google Form) -->
  <div id="quotePopup" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;z-index:9999">
    <div style="background:white;border-radius:10px;padding:18px;width:92%;max-width:420px;box-shadow:0 6px 20px rgba(0,0,0,0.25)">
      <h3 style="margin:0 0 8px 0;color:var(--accent)">Request a Quote</h3>
      <form id="localQuoteForm">
        <label style="font-size:13px;margin-top:8px">Your name</label>
        <input id="q_name" required style="width:100%;padding:8px;margin-top:6px;border-radius:6px;border:1px solid #ddd">

        <label style="font-size:13px;margin-top:8px">Contact (email or phone)</label>
        <input id="q_contact" required style="width:100%;padding:8px;margin-top:6px;border-radius:6px;border:1px solid #ddd">

        <label style="font-size:13px;margin-top:8px">Service required</label>
        <input id="q_service" style="width:100%;padding:8px;margin-top:6px;border-radius:6px;border:1px solid #ddd">

        <label style="font-size:13px;margin-top:8px">Message</label>
        <textarea id="q_message" rows="3" style="width:100%;padding:8px;margin-top:6px;border-radius:6px;border:1px solid #ddd"></textarea>

        <label style="font-size:13px;margin-top:8px">Vendor</label>
        <input id="q_vendor" readonly style="width:100%;padding:8px;margin-top:6px;border-radius:6px;border:1px solid #ddd;background:#f6f7fb">

        <div style="display:flex;gap:8px;margin-top:12px">
          <button type="submit" style="flex:1;padding:10px;background:var(--accent);color:white;border:none;border-radius:8px">Send Request</button>
          <button type="button" onclick="closeQuote()" style="flex:1;padding:10px;background:#ddd;border:none;border-radius:8px">Cancel</button>
        </div>
      </form>
      <p style="font-size:12px;color:var(--muted);margin-top:8px">Note: We will forward your request to the vendor and also email you a confirmation. Vendors' contact details are kept private.</p>
    </div>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    function scrollIntoSection(id){
      const el = document.getElementById(id);
      if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
    }

    function previewFiles(){
      const input = document.getElementById('fileInput');
      const area = document.getElementById('previewArea');
      area.innerHTML = '';
      if(!input.files) return;
      Array.from(input.files).slice(0,6).forEach(file=>{
        if(!file.type.startsWith('image/')) return;
        const img = document.createElement('img');
        img.className = 'up-img';
        img.alt = file.name;
        const reader = new FileReader();
        reader.onload = (e)=> img.src = e.target.result;
        reader.readAsDataURL(file);
        area.appendChild(img);
      });
    }

    /********* Vendors: fetch & render *********/
    (function(){
      const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTUq7EgryNbnkGUWGBL4OzqaniDrrvjAx61albRcsPAflHyA7ln7nbyX9Cv-JaQJO5X2n9nKaWwTqTa/pub?output=csv";
      const ADMIN_EMAIL = "adityarajthakur042@gmail.com"; // where lead emails will go
      const CUSTOMER_FORM_LINK = "https://docs.google.com/forms/d/e/1FAIpQLScALmXEMI63j7hFbhDPolxKLxiO_PyQNpWazUruS2DcZbc8jg/viewform?usp=publish-editor";
      const PLACEHOLDER = "https://via.placeholder.com/600x400?text=No+Image";

      function parseCSV(text){
        const rows = [];
        const lines = text.replace(/\r/g,'').split('\n');
        for(let i=0;i<lines.length;i++){
          const line = lines[i];
          if(!line) continue;
          const cells = []; let cur=''; let inQ=false;
          for(let j=0;j<line.length;j++){
            const ch = line[j];
            if(ch === '"'){
              if(inQ && line[j+1] === '"'){ cur += '"'; j++; }
              else inQ = !inQ;
            } else if(ch === ',' && !inQ){ cells.push(cur); cur=''; }
            else cur += ch;
          }
          cells.push(cur);
          rows.push(cells);
        }
        return rows;
      }

      async function loadVendors(){
        const mainGrid = document.getElementById('vendorGrid');
        const sideList = document.getElementById('vendorListSidebar');
        mainGrid.innerHTML = '<div class="card">Loading vendors...</div>';
        sideList.innerHTML = '<div class="vendor-empty">Loading vendors...</div>';

        try{
          const res = await fetch(CSV_URL);
          if(!res.ok) throw new Error('Network '+res.status);
          const txt = await res.text();
          const rows = parseCSV(txt);

          if(rows.length <= 1){
            mainGrid.innerHTML = '<div class="card">No vendors available yet.</div>';
            sideList.innerHTML = '<div class="vendor-empty">No vendors yet.</div>';
            return;
          }

          const headers = rows[0].map(h=> (h||'').trim().toLowerCase());
          const idxName = headers.findIndex(h=> h.includes('vendor name') || h==='name' || h.includes('vendor'));
          const idxCity = headers.findIndex(h=> h.includes('city'));
          const idxService = headers.findIndex(h=> h.includes('service'));
          const idxImage = headers.findIndex(h=> h.includes('upload') || h.includes('image') || h.includes('photo') || h.includes('url') );

          const items = rows.slice(1).filter(r=> r.some(c=> c && c.toString().trim() !== ''));

          mainGrid.innerHTML = '';
          sideList.innerHTML = '';

          items.forEach(r=>{
            const name = (r[idxName] || '').toString().trim();
            const city = (r[idxCity] || '').toString().trim();
            const service = (r[idxService] || '').toString().trim();
            let img = (r[idxImage] || '').toString().trim();
            if(img && img.includes("drive.google.com") && img.includes("/file/d/")){
              const m = img.match(/\/d\/([a-zA-Z0-9_-]+)/);
              if(m && m[1]) img = `https://drive.google.com/uc?export=view&id=${m[1]}`;
            }

            // --- MAIN CARD (show only service & image; hide vendor contact)
            const card = document.createElement('div');
            card.className = 'vendor-card-main';
            card.innerHTML = `
              <img src="${img || PLACEHOLDER}" alt="${service}">
              <h4 style="margin:6px 0 4px 0">${service || 'Service'}</h4>
              <p style="margin:0 0 8px 0" class="small">${city || 'Location'}</p>
              <button class="btn-request" onclick="openQuote('${escapeHtml(name)}','${escapeHtml(service)}')">Request Quote</button>
            `;
            mainGrid.appendChild(card);

            // --- SIDEBAR QUICK ITEM
            const s = document.createElement('div');
            s.className = 'vendor-item';
            s.innerHTML = `<div class="vendor-thumb">${(service && service[0])?service[0].toUpperCase():'V'}</div>
              <div class="vendor-meta"><h4>${name || 'Unnamed'}</h4><p>${service || ''}</p><p class="small">${city || ''}</p></div>`;
            sideList.appendChild(s);
          });

        }catch(err){
          console.error('Vendor load error', err);
          document.getElementById('vendorGrid').innerHTML = '<div class="card">Could not load vendors. Check CSV link & sharing.</div>';
          document.getElementById('vendorListSidebar').innerHTML = '<div class="vendor-empty">Could not load vendors.</div>';
        }
      }

      // small helper: escape content for JS injection
      function escapeHtml(str){
        if(!str) return '';
        return str.replace(/'/g, "\\'").replace(/"/g, '\\"');
      }

      loadVendors();
      setInterval(loadVendors, 90000); // refresh every 90s

      // expose openQuote/closeQuote for buttons
      window.openQuote = function(vendorName, service){
        document.getElementById('q_vendor').value = vendorName || service || 'Selected Vendor';
        document.getElementById('q_service').value = service || '';
        document.getElementById('quotePopup').style.display = 'flex';
      };

      window.closeQuote = function(){
        document.getElementById('quotePopup').style.display = 'none';
      };

      // handle local form submit: forward to admin via mailto and also open customer form (optional)
      document.getElementById('localQuoteForm').addEventListener('submit', function(e){
        e.preventDefault();
        const name = (document.getElementById('q_name').value || '').trim();
        const contact = (document.getElementById('q_contact').value || '').trim();
        const service = (document.getElementById('q_service').value || '').trim();
        const message = (document.getElementById('q_message').value || '').trim();
        const vendor = (document.getElementById('q_vendor').value || '').trim();

        // Construct mailto to admin (this opens user's mail app so you get email copy)
        const subject = encodeURIComponent(`Lead: Quote request for ${vendor}`);
        const bodyLines = [
          `Vendor: ${vendor}`,
          `Customer: ${name}`,
          `Contact: ${contact}`,
          `Service requested: ${service}`,
          `Message: ${message}`,
          '',
          'Sent via AdBridge'
        ];
        const mailto = `mailto:${encodeURIComponent(ADMIN_EMAIL)}?subject=${subject}&body=${encodeURIComponent(bodyLines.join('\n'))}`;

        // open mail client
        window.location.href = mailto;

        // Optionally open the customer Google Form (so user also fills official form) — change to false to disable
        const OPEN_CUSTOMER_FORM = true;
        if(OPEN_CUSTOMER_FORM){
          // open the customer form in new tab — vendor name cannot be auto-filled here without entry IDs,
          // but user can paste vendor name (or you can add prefill entry IDs later).
          window.open(CUSTOMER_FORM_LINK, '_blank');
        }

        // close popup and show a small alert
        closeQuote();
        setTimeout(()=> alert('Request sent — we have forwarded your lead. Admin will contact you soon.'), 300);
      });

    })();
  </script>
</body>
</html>