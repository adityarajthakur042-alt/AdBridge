<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AdBridge — Your One-Stop Ad Hub</title>
  <meta name="description" content="AdBridge — banners, pamphlets, hoardings and more. Connect with local vendors or showcase your ad designs." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --accent:#0b6df0;
      --muted:#6b7280;
      --radius:12px;
      --maxw:1100px;
      --gap:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      background:linear-gradient(180deg,#f8fbff 0%,var(--bg) 100%);
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
      padding:20px;
      display:flex;justify-content:center;
    }
    .site{width:100%;max-width:var(--maxw)}
    header{display:flex;align-items:center;gap:16px;margin-bottom:14px}
    .logo{width:58px;height:58px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#6bb3ff);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:20px;box-shadow:0 8px 30px rgba(11,109,240,0.12)}
    h1{margin:0;font-size:20px}
    .tag{color:var(--muted);font-size:13px;margin-top:4px}
    nav{display:flex;gap:10px;margin-top:6px;flex-wrap:wrap}
    .btn{background:var(--card);border-radius:10px;padding:8px 12px;display:inline-block;box-shadow:0 4px 14px rgba(14,20,25,0.04);font-weight:600;cursor:pointer;text-decoration:none;color:var(--accent);border:1px solid rgba(11,109,240,0.08)}
    .primary{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer;box-shadow:0 12px 30px rgba(11,109,240,0.12)}
    .secondary{background:transparent;border:1px solid rgba(11,109,240,0.12);padding:10px 14px;border-radius:10px;color:var(--accent)}
    .hero{background:linear-gradient(180deg,#ffffff,#fbfdff);border-radius:var(--radius);padding:18px;display:flex;gap:18px;align-items:center;box-shadow:0 10px 30px rgba(12,20,40,0.04)}
    .hero-left{flex:1}
    .hero-title{font-size:20px;margin:0 0 8px 0}
    .hero-sub{color:var(--muted);margin:0 0 12px 0}
    main{margin-top:18px;display:grid;grid-template-columns:1fr 360px;gap:var(--gap)}
    @media (max-width:900px){main{grid-template-columns:1fr} .preview-art{display:none}}
    .cards{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    @media (max-width:600px){.cards{grid-template-columns:1fr}}
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(12,20,40,0.04);border:1px solid rgba(15,23,42,0.04);display:flex;gap:12px;align-items:center}
    .card-thumb{width:88px;height:64px;border-radius:8px;background:linear-gradient(135deg,#fff,#f0f8ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--accent)}
    .small{font-size:12px;color:var(--muted)}
    .sidebar{position:relative;background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 20px rgba(12,20,40,0.04);border:1px solid rgba(15,23,42,0.04)}
    input, textarea, select{padding:8px 10px;border-radius:8px;border:1px solid #e6eefb;background:#fbfdff;font-size:14px;outline:none;width:100%}
    textarea{min-height:90px;resize:vertical}
    .upload-preview{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .up-img{width:86px;height:60px;border-radius:8px;object-fit:cover;border:1px solid rgba(12,20,40,0.04)}
    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
    /* vendor boxes */
    .vendor-box{margin-top:12px;border-radius:10px;padding:10px;background:#fbfdff;border:1px solid #eef4ff}
    .vendor-item{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid rgba(12,20,40,0.04);margin-bottom:8px;background:white}
    .vendor-thumb{width:48px;height:48px;border-radius:8px;background:linear-gradient(135deg,#e9f1ff,#fff);display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--accent)}
    .vendor-meta{flex:1;text-align:left}
    .vendor-meta h4{margin:0;font-size:13px}
    .vendor-meta p{margin:4px 0 0 0;font-size:12px;color:var(--muted)}
    /* vendor listing in main */
    .vendor-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px;margin-top:12px}
    .vendor-card-main{background:var(--card);padding:12px;border-radius:10px;border:1px solid rgba(15,23,42,0.04);box-shadow:0 6px 18px rgba(12,20,40,0.04)}
    .vendor-card-main img{width:100%;height:140px;object-fit:cover;border-radius:8px;margin-bottom:8px}
  </style>
</head>
<body>
  <div class="site">
    <header>
      <div class="logo">AB</div>
      <div style="flex:1">
        <h1>AdBridge — Your One-Stop Ad Hub</h1>
        <div class="tag">Banners • Pamphlets • Hoardings — Find vendors or showcase your ads</div>
        <nav style="margin-top:8px">
          <a class="btn" href="#categories">Categories</a>
          <a class="btn" href="#upload">Upload Sample</a>
          <a class="btn" href="#vendors">Vendors</a>
          <a class="btn" href="#contact">Contact</a>
        </nav>
      </div>
    </header>

    <section class="hero" aria-label="hero">
      <div class="hero-left">
        <div>
          <div class="hero-title">Get the perfect ad for your business — fast</div>
          <div class="hero-sub">Browse local vendors, preview sample designs, or request a custom quote. Simple, mobile-first, and free to start.</div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="primary" onclick="scrollIntoSection('vendors')">Browse Vendors</button>
            <button class="secondary" onclick="scrollIntoSection('upload')">Upload Sample</button>
          </div>
        </div>
      </div>
      <div class="preview-art" aria-hidden="true" style="width:180px;height:120px;border-radius:10px;background:linear-gradient(135deg,#e9f1ff,#fff);display:flex;align-items:center;justify-content:center;color:var(--accent);font-weight:700">AD SAMPLES</div>
    </section>

    <main>
      <section>
        <h2 id="categories" style="margin:0 0 10px 0">Popular Categories</h2>
        <div class="cards" role="list">
          <article class="card" role="listitem">
            <div class="card-thumb">B</div>
            <div>
              <h3>Banners</h3>
              <p class="small">Outdoor banners, vinyl prints, retractable stands — sizes & designs.</p>
            </div>
          </article>

          <article class="card" role="listitem">
            <div class="card-thumb">F</div>
            <div>
              <h3>Pamphlets & Flyers</h3>
              <p class="small">Single and multi-page leaflets, double-sided prints, bulk orders.</p>
            </div>
          </article>

          <article class="card" role="listitem">
            <div class="card-thumb">H</div>
            <div>
              <h3>Hoardings</h3>
              <p class="small">Large format hoarding design & placement — city-specific vendors.</p>
            </div>
          </article>

          <article class="card" role="listitem">
            <div class="card-thumb">D</div>
            <div>
              <h3>Digital Ads</h3>
              <p class="small">Social media banners, website headers, and ad creatives for campaigns.</p>
            </div>
          </article>
        </div>

        <div style="margin-top:16px">
          <h3 style="margin-bottom:8px">How it works</h3>
          <ol class="small" style="padding-left:18px;margin:0">
            <li>Browse category and sample designs.</li>
            <li>Contact vendor using the request form or email (opens your mail app).</li>
            <li>Negotiate price & delivery directly with vendor — no middleman required.</li>
          </ol>
        </div>

        <!-- LIVE VENDOR LISTINGS (MAIN) -->
        <section id="vendors" style="margin-top:18px">
          <h2 style="margin-bottom:8px">Live Vendor Listings</h2>
          <div id="vendorGrid" class="vendor-grid">
            <div class="card">Loading vendors...</div>
          </div>
        </section>
      </section>

      <aside class="sidebar">
        <h3 style="margin-top:0">Quick Request</h3>
        <p class="small">Fill the form — it will open your email app with prefilled subject & message so you can send a request to vendors.</p>

        <form id="contactForm" onsubmit="sendMail(event)">
          <label for="name">Your name</label>
          <input id="name" type="text" required placeholder="Aditya" />

          <label for="email">Your email</label>
          <input id="email" type="email" required placeholder="you@mail.com" />

          <label for="type">Ad type</label>
          <select id="type" required>
            <option value="Banners">Banners</option>
            <option value="Pamphlets">Pamphlets & Flyers</option>
            <option value="Hoardings">Hoardings</option>
            <option value="Digital">Digital Ads</option>
          </select>

          <label for="details">Details (size, city, qty)</label>
          <textarea id="details" placeholder="Write requirements e.g., 3x6 ft vinyl banner, 10 qty, delivery in Patna"></textarea>

          <div style="display:flex;gap:8px;margin-top:6px">
            <button class="primary" type="submit">Send via Gmail</button>
            <button type="button" class="btn" onclick="copyExample()">Example Text</button>
          </div>
        </form>

        <hr style="margin:12px 0;border:none;border-top:1px solid #eef4ff">

        <h4 style="margin:8px 0 6px 0">Upload a sample (local preview)</h4>
        <p class="small">Showcase your design files (local preview only). Vendors: share this file when contacting customers.</p>

        <div id="upload" style="margin-top:8px">
          <input id="fileInput" type="file" accept="image/*" multiple onchange="previewFiles()" />
          <div class="upload-preview" id="previewArea"></div>
        </div>

        <!-- VENDOR LISTINGS (SIDEBAR QUICK VIEW) -->
        <div class="vendor-box" id="vendorBox" aria-live="polite" style="margin-top:12px">
          <strong style="display:block;margin-bottom:8px">Vendor Listings (Quick)</strong>
          <div id="vendorListSidebar">
            <div class="vendor-empty">Loading vendors...</div>
          </div>
        </div>
      </aside>
    </main>

    <footer>
      <section style="margin-top:14px" id="contact">
        <div style="max-width:720px;margin:0 auto">
          <h3 style="margin-bottom:8px">Contact & Support</h3>
          <p class="muted small" style="margin:0 0 8px 0">Prefer email? Click below to open your mail app with a message to: <strong>adsupport@example.com</strong></p>
          <div style="display:flex;gap:8px;justify-content:center">
            <a class="btn" href="mailto:adsupport@example.com?subject=AdBridge%20Support" target="_blank">Email Support</a>
            <a class="btn" href="https://wa.me/?text=I%20need%20ad%20services%20from%20AdBridge" target="_blank">Share on WhatsApp</a>
          </div>
        </div>
      </section>

      <div style="margin-top:12px">© <span id="year"></span> AdBridge — Built with ❤️ on mobile</div>
    </footer>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    function scrollIntoSection(id){
      const el = document.getElementById(id);
      if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
    }

    function sendMail(e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const type = document.getElementById('type').value;
      const details = document.getElementById('details').value;

      const subject = encodeURIComponent("Ad Request from " + name);
      const body = encodeURIComponent(
        `Name: ${name}\nEmail: ${email}\nAd Type: ${type}\nDetails: ${details}\n\n(Please attach your sample design before sending)`
      );

      window.location.href = `mailto:adityarajthakur042@gmail.com?subject=${subject}&body=${body}`;
    }

    function copyExample(){
      const example = "Hello, I need a 3ft x 6ft vinyl banner for a store opening on Nov 15. Quantity: 2. Delivery: Patna. Budget: ₹1200 each. Please send a quote and lead time.";
      navigator.clipboard?.writeText(example).then(()=>{ alert('Example text copied to clipboard — paste it into the details field or email.'); }).catch(()=>alert('Copy failed — long press the details field to paste on your device.'));
    }

    function previewFiles(){
      const input = document.getElementById('fileInput');
      const area = document.getElementById('previewArea');
      area.innerHTML = '';
      if(!input.files) return;
      Array.from(input.files).slice(0,6).forEach(file=>{
        if(!file.type.startsWith('image/')) return;
        const img = document.createElement('img');
        img.className = 'up-img';
        img.alt = file.name;
        const reader = new FileReader();
        reader.onload = (e)=> img.src = e.target.result;
        reader.readAsDataURL(file);
        area.appendChild(img);
      });
    }

    /***** VENDOR LISTING: fetch CSV from your published Google Sheet and render in main + sidebar *****/
    (function(){
      const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTUq7EgryNbnkGUWGBL4OzqaniDrrvjAx61albRcsPAflHyA7ln7nbyX9Cv-JaQJO5X2n9nKaWwTqTa/pub?output=csv";

      // Basic CSV parser with quotes handling
      function parseCSV(text) {
        const rows = [];
        const lines = text.replace(/\r/g, '').split('\n');
        for (let i = 0; i < lines.length; i++) {
          const line = lines[i];
          if (!line) continue;
          const cells = [];
          let cur = '';
          let inQuotes = false;
          for (let j = 0; j < line.length; j++) {
            const ch = line[j];
            if (ch === '"') {
              if (inQuotes && line[j+1] === '"') { cur += '"'; j++; }
              else inQuotes = !inQuotes;
            } else if (ch === ',' && !inQuotes) {
              cells.push(cur);
              cur = '';
            } else cur += ch;
          }
          cells.push(cur);
          rows.push(cells);
        }
        return rows;
      }

      async function loadVendors() {
        const mainGrid = document.getElementById('vendorGrid');
        const sideList = document.getElementById('vendorListSidebar');
        mainGrid.innerHTML = '<div class="card">Loading vendors...</div>';
        sideList.innerHTML = '<div class="vendor-empty">Loading vendors...</div>';

        try {
          const res = await fetch(CSV_URL);
          if (!res.ok) throw new Error('Network error');
          const txt = await res.text();
          const rows = parseCSV(txt);
          if (rows.length <= 1) {
            mainGrid.innerHTML = '<div class="card">No vendors available yet.</div>';
            sideList.innerHTML = '<div class="vendor-empty">No vendors yet.</div>';
            return;
          }

          // headers detection
          const headers = rows[0].map(h => (h||'').trim().toLowerCase());
          const idxName = headers.findIndex(h => h.includes('vendor name') || h.includes('name'));
          const idxCity = headers.findIndex(h => h.includes('city'));
          const idxService = headers.findIndex(h => h.includes('service'));
          const idxImage = headers.findIndex(h => h.includes('upload') || h.includes('image') || h.includes('photo') || h.includes('url'));

          const items = rows.slice(1).filter(r => r.some(c => c && c.trim() !== ''));

          // render main grid
          mainGrid.innerHTML = '';
          sideList.innerHTML = '';

          items.forEach(r => {
            const name = (r[idxName] || '').trim();
            const city = (r[idxCity] || '').trim();
            const service = (r[idxService] || '').trim();
            const img = (r[idxImage] || '').trim();

            // main card
            const card = document.createElement('div');
            card.className = 'vendor-card-main';
            card.innerHTML = `
              ${img ? `<img src="${img}" alt="${name}">` : ''}
              <h4 style="margin:6px 0 4px 0">${name || 'Unnamed Vendor'}</h4>
              <p class="small"><strong>Service:</strong> ${service || 'N/A'}</p>
              <p class="small"><strong>City:</strong> ${city || 'N/A'}</p>
            `;
            mainGrid.appendChild(card);

            // sidebar item
            const s = document.createElement('div');
            s.className = 'vendor-item';
            s.innerHTML = `
              <div class="vendor-thumb">${(service && service[0])?service[0].toUpperCase():'V'}</div>
              <div class="vendor-meta">
                <h4>${name || 'Unnamed'}</h4>
                <p>${service || ''}</p>
                <p class="small">${city || ''}</p>
              </div>
            `;
            sideList.appendChild(s);
          });

        } catch (err) {
          console.error('Vendor load error', err);
          mainGrid.innerHTML = '<div class="card">Could not load vendors. Check CSV link and sharing settings.</div>';
          sideList.innerHTML = '<div class="vendor-empty">Could not load vendors.</div>';
        }
      }

      loadVendors();
      setInterval(loadVendors, 90000); // refresh every 90s
    })();
  </script>
</body>
</html>